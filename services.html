<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Minutes – Browse Services</title>
  <link rel="stylesheet" href="styles/main.css"/>
  <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><rect width='100' height='100' fill='%23ff4d4d'/><text x='50' y='58' font-size='56' text-anchor='middle' fill='white' font-family='Arial'>Q</text></svg>">
</head>
<body>
  <header class="nav">
    <div class="nav-left">
      <a class="brand" href="index.html">Minutes</a>
    </div>
    <nav class="nav-links">
      <a href="index.html">Home</a>
      <a href="services.html">Services</a>
      <a href="subscription.html">Subscription</a>
      <a href="bookings.html">Bookings</a>
      <a href="contact.html">Contact</a>
    </nav>
  </header>

  <main class="container">
    <h1>Services</h1>
    <div class="filters">
      <select id="categoryFilter">
        <option value="">All categories</option>
      </select>
      <select id="sortBy">
        <option value="distance">Sort by distance</option>
        <option value="rating">Sort by rating</option>
      </select>
      <input id="textFilter" type="text" placeholder="Search by name or tag"/>
    </div>
    <div id="serviceGrid" class="cards-grid"></div>
  </main>

  <script src="scripts/data.js"></script>
  <script>
    document.addEventListener('DOMContentLoaded', ()=>{
      const grid = document.getElementById('serviceGrid');
      const categoryFilter = document.getElementById('categoryFilter');
      const sortBy = document.getElementById('sortBy');
      const textFilter = document.getElementById('textFilter');
      const cats = [...new Set(window.QS_DATA.vendors.map(v=>v.category))];
      cats.forEach(c=>{
        const o=document.createElement('option'); o.value=c; o.textContent=c; categoryFilter.appendChild(o);
      });
      function render(){
        let list=[...window.QS_DATA.vendors];
        const q = textFilter.value.toLowerCase().trim();
        const cat = categoryFilter.value;
        if(cat) list = list.filter(v=>v.category===cat);
        if(q) list = list.filter(v => v.name.toLowerCase().includes(q) || v.tags.join(' ').toLowerCase().includes(q));
        if(sortBy.value==='rating'){ list.sort((a,b)=>b.rating-a.rating); } else { list.sort((a,b)=>a.distance_km-b.distance_km); }
        grid.innerHTML='';
        list.forEach(v=>{
          const el = document.createElement('a');
          el.className='card';
          el.href = `vendor.html?id=${encodeURIComponent(v.id)}`;
          el.innerHTML = `
            <div class="card-img" style="background-image: linear-gradient(0deg, rgba(0,0,0,.3), rgba(0,0,0,.1)), url('${v.image||''}');"></div>
            <div class="card-body">
              <div class="card-title">${v.name}</div>
              <div class="muted">${v.category} · ${v.distance_km} km</div>
              <div class="rating">★ ${v.rating.toFixed(1)}</div>
            </div>`;
          grid.appendChild(el);
        });
      }
      categoryFilter.onchange = render;
      sortBy.onchange = render;
      textFilter.oninput = render;
      render();
    });
  </script>

  <footer class="footer">
    <div>© 2025 QuickServe · Neighborhood‑powered delivery & on‑demand services</div>
  </footer>
  <script src="scripts/app.js"></script>
</body>
</html>
